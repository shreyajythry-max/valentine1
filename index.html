<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üíò Be My Valentine?</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;600;800;900&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      background: #ffe4f0;
      background-image:
        radial-gradient(circle at 15% 20%, #ffc2dc55 0%, transparent 40%),
        radial-gradient(circle at 85% 80%, #ffb3cc55 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, #fff0f544 0%, transparent 60%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Nunito', sans-serif;
      overflow-x: hidden;
      position: relative;
    }

    .bg-hearts {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
    }
    .bg-heart {
      position: absolute;
      opacity: 0.15;
      animation: floatHeart linear infinite;
    }
    @keyframes floatHeart {
      0%   { transform: translateY(110vh) rotate(0deg); opacity: 0; }
      10%  { opacity: 0.2; }
      90%  { opacity: 0.2; }
      100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    /* ‚îÄ‚îÄ Card ‚îÄ‚îÄ */
    .card {
      position: relative;
      z-index: 1;
      background: rgba(255, 255, 255, 0.76);
      backdrop-filter: blur(18px);
      border-radius: 32px;
      padding: 48px 40px 44px;
      max-width: 540px;
      width: 90%;
      text-align: center;
      box-shadow:
        0 8px 40px rgba(255, 100, 150, 0.18),
        0 2px 8px rgba(255, 100, 150, 0.10),
        inset 0 1px 0 rgba(255,255,255,0.9);
      border: 1.5px solid rgba(255, 180, 200, 0.4);
      animation: bounceIn 0.7s cubic-bezier(0.36, 0, 0.66, -0.56) both;
      transition: box-shadow 0.5s ease, background 0.5s ease;
    }
    @keyframes bounceIn {
      0%   { transform: scale(0.5) translateY(60px); opacity: 0; }
      60%  { transform: scale(1.06) translateY(-8px); opacity: 1; }
      80%  { transform: scale(0.97) translateY(3px); }
      100% { transform: scale(1) translateY(0); }
    }

    h1 {
      font-family: 'Pacifico', cursive;
      font-size: clamp(1.7rem, 5vw, 2.4rem);
      color: #e05080;
      line-height: 1.25;
      text-shadow: 0 2px 8px rgba(224,80,128,0.15);
      transition: all 0.5s ease;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 0.95rem;
      color: #c06080;
      margin-bottom: 28px;
      font-weight: 600;
      opacity: 0.75;
      transition: all 0.4s ease;
      min-height: 22px;
    }

    /* ‚îÄ‚îÄ Media box ‚îÄ‚îÄ */
    .media-wrap {
      width: 240px;
      height: 240px;
      margin: 0 auto 32px;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 6px 28px rgba(224, 80, 128, 0.22);
      border: 3px solid rgba(255, 160, 190, 0.5);
      position: relative;
      background: #ffd6e8;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.4s ease;
    }
    .media-wrap:hover { transform: scale(1.03) rotate(-1deg); }

    .media-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      position: absolute;
      top: 0; left: 0;
      transition: opacity 0.5s ease;
    }
    .media-wrap img.hidden { opacity: 0; pointer-events: none; }

    .fallback-emoji {
      font-size: 5rem;
      position: absolute;
      z-index: 0;
      transition: opacity 0.3s;
    }

    /* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
    .buttons {
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 4px;
    }

    .btn {
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 1.1rem;
      padding: 14px 32px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      letter-spacing: 0.02em;
    }

    .btn-yes {
      background: linear-gradient(135deg, #ff6b9d, #e0406e);
      color: #fff;
      box-shadow: 0 6px 20px rgba(224,64,110,0.35);
    }
    .btn-yes:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 10px 28px rgba(224,64,110,0.45);
    }
    .btn-yes.popped { animation: pop 0.45s cubic-bezier(0.36, 0, 0.66, -0.56); }
    @keyframes pop {
      0%   { transform: scale(1); }
      40%  { transform: scale(1.28) rotate(-3deg); }
      70%  { transform: scale(0.95) rotate(2deg); }
      100% { transform: scale(1); }
    }

    .btn-no {
      background: linear-gradient(135deg, #ffd0df, #ffb3cc);
      color: #c06080;
      box-shadow: 0 4px 14px rgba(200,80,120,0.15);
      position: absolute;
    }
    .btn-no.placed { position: fixed; }

    /* ‚îÄ‚îÄ Confetti ‚îÄ‚îÄ */
    #confetti-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 100;
      display: none;
    }

    .card.said-yes {
      box-shadow: 0 8px 60px rgba(255,100,150,0.35), 0 2px 10px rgba(255,100,150,0.15);
      background: rgba(255,240,248,0.9);
    }

    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(255,100,150,0.4); }
      50%       { box-shadow: 0 0 52px rgba(255,100,150,0.85); }
    }
    .media-wrap.celebrate {
      animation: glowPulse 1.5s ease-in-out infinite;
      border-color: rgba(255,120,160,0.85);
    }

    .escape-hint {
      font-size: 0.78rem;
      color: #d08090;
      margin-top: 18px;
      min-height: 18px;
      font-style: italic;
    }
  </style>
</head>
<body>

<div class="bg-hearts" id="bgHearts"></div>
<canvas id="confetti-canvas"></canvas>

<div class="card" id="card">
  <h1 id="mainText">Will you be my Valentine? üíò</h1>
  <p class="subtitle" id="subtitle">Pretty please... ü•∫</p>

  <div class="media-wrap" id="mediaWrap">
    <!-- Emoji fallback while GIFs load -->
    <div class="fallback-emoji" id="fallbackEmoji">üê∂</div>

    <!-- 1. Begging puppy GIF -->
    <img
      id="puppyGif"
      src="https://media.giphy.com/media/QvBoMEcQ7DQXK/giphy.gif"
      alt="Puppy begging"
      onerror="this.src='https://media.giphy.com/media/mCRJDo24UvJMA/giphy.gif'; this.onerror=null;"
    />

    <!-- 2. Happy puppy GIF (shown briefly on Yes) -->
    <img
      id="happyGif"
      class="hidden"
      src="https://media.giphy.com/media/l3q2K5jinAlChoCLS/giphy.gif"
      alt="Happy puppy"
      onerror="this.src='https://media.giphy.com/media/4Zo41lhzKt6iZ8xff9/giphy.gif'; this.onerror=null;"
    />

    <!-- 3. Couple hugging GIF (shown after happy puppy) -->
    <img
      id="coupleGif"
      class="hidden"
      src="https://media.giphy.com/media/s6fnVyWTfM2nUKuMVY/giphy.gif"
      alt="Couple hugging"
      onerror="this.src='https://media.giphy.com/media/5O6tM5hqIOcSwQdaWs/giphy.gif'; this.onerror=null;"
    />
  </div>

  <div class="buttons">
    <button class="btn btn-yes" id="btnYes" onclick="sayYes()">Yes ‚ù§Ô∏è</button>
    <button class="btn btn-no" id="btnNo">No üíî</button>
  </div>

  <p class="escape-hint" id="escapeHint"></p>
</div>

<script>
  /* ‚îÄ‚îÄ Floating hearts ‚îÄ‚îÄ */
  const bgHearts = document.getElementById('bgHearts');
  const heartEmojis = ['üíó','üíñ','üíï','ü©∑','üíì','üíû','üå∏','‚ú®'];
  for (let i = 0; i < 22; i++) {
    const h = document.createElement('span');
    h.className = 'bg-heart';
    h.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
    h.style.left = Math.random() * 100 + 'vw';
    h.style.fontSize = (0.9 + Math.random() * 1.8) + 'rem';
    h.style.animationDuration = (8 + Math.random() * 14) + 's';
    h.style.animationDelay = (Math.random() * 12) + 's';
    bgHearts.appendChild(h);
  }

  /* Hide emoji fallback once puppy GIF loads */
  document.getElementById('puppyGif').addEventListener('load', () => {
    document.getElementById('fallbackEmoji').style.opacity = '0';
  });

  /* ‚îÄ‚îÄ No button evasion ‚îÄ‚îÄ */
  let noAttempts = 0;
  const btnNo = document.getElementById('btnNo');
  const escapeHint = document.getElementById('escapeHint');
  const hints = ["oh no you don't üòè", "nuh-uh! üêæ", "you can't escape love üòå"];

  function moveNoButton() {
    if (noAttempts >= 3) return;
    noAttempts++;
    btnNo.classList.add('placed');
    const m = 80, bW = btnNo.offsetWidth || 130, bH = btnNo.offsetHeight || 52;
    btnNo.style.left = (Math.random() * (window.innerWidth  - bW - m) + m/2) + 'px';
    btnNo.style.top  = (Math.random() * (window.innerHeight - bH - m) + m/2) + 'px';
    escapeHint.textContent = hints[Math.min(noAttempts - 1, 2)];
    if (noAttempts >= 3) {
      btnNo.style.transform     = 'scale(0.3)';
      btnNo.style.opacity       = '0.25';
      btnNo.style.pointerEvents = 'none';
      document.getElementById('mainText').textContent = "You can't escape love üòå";
      document.getElementById('subtitle').textContent = 'just give in already üê∂üíï';
    }
  }

  btnNo.addEventListener('mouseover',  moveNoButton);
  btnNo.addEventListener('click',      moveNoButton);
  btnNo.addEventListener('touchstart', moveNoButton, { passive: true });

  /* ‚îÄ‚îÄ Yes button ‚îÄ‚îÄ */
  function sayYes() {
    const btn = document.getElementById('btnYes');
    btn.classList.add('popped');
    btn.disabled = true;
    document.getElementById('btnNo').style.display = 'none';
    document.getElementById('escapeHint').textContent = '';
    document.getElementById('card').classList.add('said-yes');

    const wrap = document.getElementById('mediaWrap');
    wrap.classList.add('celebrate');

    /* Step 1 ‚Äî show happy puppy immediately */
    document.getElementById('puppyGif').classList.add('hidden');
    document.getElementById('fallbackEmoji').style.opacity = '0';
    document.getElementById('happyGif').classList.remove('hidden');

    document.getElementById('mainText').textContent = 'YAY!!! Best decision ever!! ü•πüíñ';
    document.getElementById('subtitle').textContent  = 'us rn üëáüíë‚ú®';

    /* Step 2 ‚Äî swap to couple hugging GIF after 1.8s */
    setTimeout(() => {
      document.getElementById('happyGif').classList.add('hidden');
      document.getElementById('coupleGif').classList.remove('hidden');
    }, 1800);

    launchConfetti();
    setTimeout(() => btn.classList.remove('popped'), 450);
  }

  /* ‚îÄ‚îÄ Confetti ‚îÄ‚îÄ */
  function launchConfetti() {
    const canvas = document.getElementById('confetti-canvas');
    const ctx    = canvas.getContext('2d');
    canvas.style.display = 'block';
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;

    const colors = ['#ff6b9d','#ffa7c4','#ff3e7f','#ffcce0','#e0406e','#ff85a1','#ffe4f0','#fff'];
    const emojis = ['üíï','üíñ','ü©∑','‚ú®','üå∏','üíó','üî•','üíë'];
    const pieces = Array.from({ length: 150 }, () => ({
      x:     Math.random() * canvas.width,
      y:     -20 - Math.random() * canvas.height * 0.6,
      size:  8 + Math.random() * 10,
      color: colors[Math.floor(Math.random() * colors.length)],
      emoji: Math.random() > 0.52 ? emojis[Math.floor(Math.random() * emojis.length)] : null,
      speed: 2 + Math.random() * 4,
      swing: (Math.random() - 0.5) * 3,
      rot:   Math.random() * 360,
      rotV:  (Math.random() - 0.5) * 6,
      shape: Math.random() > 0.5 ? 'rect' : 'circle',
    }));

    let frame = 0;
    (function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      let alive = false;
      pieces.forEach(p => {
        p.y += p.speed;
        p.x += Math.sin(frame * 0.04 + p.swing) * 1.2;
        p.rot += p.rotV;
        if (p.y < canvas.height + 30) alive = true;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot * Math.PI / 180);
        if (p.emoji) {
          ctx.font = p.size + 'px serif';
          ctx.fillText(p.emoji, -p.size/2, p.size/2);
        } else {
          ctx.fillStyle = p.color;
          ctx.globalAlpha = 0.88;
          if (p.shape === 'rect') ctx.fillRect(-p.size/2, -p.size/4, p.size, p.size/2);
          else { ctx.beginPath(); ctx.arc(0,0,p.size/2.5,0,Math.PI*2); ctx.fill(); }
        }
        ctx.restore();
      });
      frame++;
      if (alive && frame < 300) requestAnimationFrame(draw);
      else canvas.style.display = 'none';
    })();
  }

  window.addEventListener('resize', () => {
    const c = document.getElementById('confetti-canvas');
    c.width = window.innerWidth; c.height = window.innerHeight;
  });
</script>
</body>
</html>
